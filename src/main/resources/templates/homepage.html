<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

    <th:block th:fragment="importBS">
        <meta charset="UTF-8">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
              integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
              crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css?family=EB+Garamond&display=swap" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
                integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
                crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
                integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
                crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
                integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
                crossorigin="anonymous"></script>
    </th:block>

    <link rel="stylesheet" type="text/css" href="/homepageDecor.css">
    <title>Cars Dealers</title>

</head>

<body>

<th:block th:fragment="importNavBar">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/">Home</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
                aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="/addcater">Add a Category <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="/addcar">Add a Car<span class="sr-only">(current)</span></a>
                </li>

                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        View By Category
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <div class="container" th:each="eachCar:${catergorys}">
                            <a class="dropdown-item" th:href="@{/detail/{id} (id=${eachCar.id})}">
                                <h5 th:text="${eachCar.nameCategory}"></h5>
                            </a>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </nav>
</th:block>


<h1 class="introTitle">Cars and Their Categories</h1>

<!--<div class="container" th:each="eachCar:${catergorys}">-->
<!--<a th:href="@{/detail/{id} (id=${eachCar.id})}">-->

<!--<h5 th:text="${eachCar.nameCategory}"></h5>-->

<!--</a>-->
<!--</div>-->

<div class="container">

    <!--<a href="/addcar">Add a Car</a>-->
    <!--<br>-->
    <!--<a href="/addcater">Add a Category</a>-->

    <div th:each="eachCar:${catergorys}">
        <h3> Category: <span th:text="${eachCar.nameCategory}"></span>
        </h3>

        <h5 th:text="${#lists.size(eachCar.cars)>0}?'Cars List':'No Cars To Show'"></h5>
        <div class="card-group">

            <div class="card" th:each="car:${eachCar.cars}">
                <!--<th:block th:if="${car.headShot} == null">-->
                    <!--<p>No picture to display</p>-->
                <!--</th:block>-->
                <!--<th:block th:if="${car.headShot} != null">-->
                    <!--<img th:src="${car.headShot}" class="card-img-top" alt="...">-->
                <!--</th:block>-->


                <div class="card-body">
                    <h5 class="card-title" th:text="${car.model}"
                        th:value="${car.id}"></h5>
                    <p class="card-text" th:text="${car.manufacture}"
                       th:value="${car.id}"></p>
                    <p class="card-text" th:text="${car.year}"
                       th:value="${car.id}"></p>
                    <a th:href="@{/update/{id} (id=${car.id})}">Update</a>
                    <a th:href="@{/detail/car/{id} (id=${car.id})}">View More</a>
                </div>
            </div>
        </div>

        <div>
            <a th:href="@{/detail/{id} (id=${eachCar.id})}">View More</a>
            <a th:href="@{/delete/{id} (id=${eachCar.id})}">Delete</a>
        </div>
        <br>

        <!--<a th:href="@{/update/{id} (id=${eachCar.id})}">Update</a>-->

    </div>
    <hr>
    <br>

</div>

</body>
</html>